<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>SixMinds - Dashboard</title>

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/stylesheet.css">


  <!-- Linha referêncial boostrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <!-- Icone na amba do navegador -->
  <link rel="shortcut icon" href="img/arvore.png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="https://www.chartjs.org/dist/2.9.3/Chart.min.js"></script>
  <script src="https://www.chartjs.org/samples/latest/utils.js"></script>


  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }

    }
  </style>
  <!-- Custom styles for this template -->
  <link href="dashboard.css" rel="stylesheet">
</head>

<body>
  <nav class="navbar navbar-light sticky-top bg-light flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">Company name</a>
    <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse"
      data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
    <ul class="navbar-nav px-3">
      <li class="nav-item text-nowrap my-2">

        <a class="nav-link btn btn-outline-danger text-danger px-1" href="#">Sign out</a>
      </li>
    </ul>
  </nav>

  <div class="container-fluid">
    <div class="row">
      <nav id="sidebarMenu" class="col-sm-3 col-lg-2 d-md-block bg-light sidebar collapse w-80">
        <div class="sidebar-sticky pt-3">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active" href="#">
                <span data-feather="home"></span>
                Dashboard <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="file"></span>
                Orders
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="shopping-cart"></span>
                Products
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="users"></span>
                Customers
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="bar-chart-2"></span>
                Reports
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="layers"></span>
                Integrations
              </a>
            </li>
          </ul>

          <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>Saved reports</span>
            <a class="d-flex align-items-center text-muted" href="#" aria-label="Add a new report">
              <span data-feather="plus-circle"></span>
            </a>
          </h6>
          <ul class="nav flex-column mb-2">
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="file-text"></span>
                Current month
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="file-text"></span>
                Last quarter
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="file-text"></span>
                Social engagement
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">
                <span data-feather="file-text"></span>
                Year-end sale
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
        <div
          class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">Dashboard</h1>

          <button id="btn_dash_solo" style="display: none;" class="btn btn-primary" onclick="mudar_dash_p_atm()">
            Solo
          </button>
          <button id="btn_dash_atm" style="display: block;" class="btn btn-success" onclick="mudar_dash_p_solo()">
            Atmosfera
          </button>


          <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group mr-2">
              <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
              <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
            </div>
            <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
              <span data-feather="calendar"></span>
              This week
            </button>
          </div>
        </div>

        <!-- <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas> -->
        <!-- -------------------------DASHBOARD DA ATMOSFERA------------------------- -->
        <div id="dash_atm">
          <!-- GRAFICO PRINCIPAL DE ATMOSFERA -->
          <canvas class="my-4 w-100" id="myChart"  width="900" height="290"></canvas>

          <div class="row">
            <!-- GRAFICO DE ROSQUINHA (atm) -->
            <div class="col">
              <h5>Status dos sensores</h5>
              <span class="description-box">Atualizado a cada 5 segundo</span>
              <div>
                <canvas id="rosquinha"></canvas>
              </div>
            </div>
            <!-- GRAFICO DE BARRAS (atm) -->
            <div class="col">
              <h5>Últimas leituras:</h5>
              <span class="description-box">Atualizado a cada 5 segundo</span>
              <div>
                <canvas id="grafico"></canvas>
              </div>
            </div>
            <div class="col">
              <!-- <div class="row">
                <h5  style="background-color: red">Maior Indice Registrado: <span id="maioregistro">-</span>%</h5>
                <br>
                <div style="background-color: green;" class="col mt-5">
                  <p>Setor: <span id="setmaior">-</span></p>
                  <p>Máquina: <span id="maqmaior">-</span></p>
                </div>
              </div> -->
              <!-- ALERTAS(atm) -->
              <div class="row">
                <div class="col">
                  <h5>Maior Indice de Temperatura: <span id="maiorTempertura">-</span>°C</h5>
                  <p>Área: <span id="maiorTemperturaArea">-</span></p>
                  

                </div>
              </div>

              <div class="row">
                <div class="col">
                  <h5>Menor Indice de Temperatura: <span id="menorTempertura">-</span>°C</h5>
                  <p>Área: <span id="menorTemperturaArea">-</span></p>
          

                </div>
              </div>
              <div class="row">
                <div class="col">
                  <h5>Maior Indice de Umidade: <span id="maiorUmidade">-</span>%</h5>
                  <p>Área: <span id="maiorUmidadeArea">-</span></p>
                  

                </div>
              </div>

              <div class="row">
                <div class="col">
                  <h5>Menor Indice  de Umidade: <span id="menorUmidade">-</span>%</h5>
                  <p>Área: <span id="menorUmidadeArea">-</span></p>
          

                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ------------------------------------ DASHBOARD DO SOLO --------------------------------->
        <div id="dash_solo" style="display: none;">
          <canvas class="my-4 w-100" id="myChartSolo" width="900" height="290"></canvas>


          <div class="row">
            <div class="col">
              <!-- GRAFICO DE ROSCQUINHA (solo) -->
              <h5>Status dos sensores</h5>
              <span class="description-box">Atualizado a cada 5 segundo</span>
              <div>
                <canvas id="rosquinha_solo"></canvas>
              </div>
            </div>
            <!-- GRAFICO DE BARRAS (solo) -->
            <div class="col">
              <h5>Últimas leituras:</h5>
              <span class="description-box">Atualizado a cada 5 segundo</span>
              <div>
                <canvas id="graficosolo"></canvas>
              </div>
            </div>

            <div class="col">
              <!-- <div class="row">
                  <h5  style="background-color: red">Maior Indice Registrado: <span id="maioregistro">-</span>%</h5>
                  <br>
                  <div style="background-color: green;" class="col mt-5">
                    <p>Setor: <span id="setmaior">-</span></p>
                    <p>Máquina: <span id="maqmaior">-</span></p>
                  </div>
                </div> -->
              <!-- ALERTAS (solo) -->
              <div class="row">
                <div class="col">
                  <h5>Maior Indice de Temperatura: <span id="maiorTemperturaSolo">-</span>°C</h5>
                  <p>Área: <span id="maiorTemperturaAreaSolo">-</span></p>
                  

                </div>
              </div>

              <div class="row">
                <div class="col">
                  <h5>Menor Indice de Temperatura: <span id="menorTemperturaSolo">-</span>°C</h5>
                  <p>Área: <span id="menorTemperturaAreaSolo">-</span></p>
          

                </div>
              </div>
              <div class="row">
                <div class="col">
                  <h5>Maior Indice de Umidade: <span id="maiorUmidadeSolo">-</span>%</h5>
                  <p>Área: <span id="maiorUmidadeAreaSolo">-</span></p>
                  

                </div>
              </div>

              <div class="row">
                <div class="col">
                  <h5>Menor Indice  de Umidade: <span id="menorUmidadeSolo">-</span>%</h5>
                  <p>Área: <span id="menorUmidadeAreaSolo">-</span></p>
          

                </div>
              </div>

                </div>
              </div>
            </div>
          </div>




        </div>
      </main>
    </div>
  </div>
</body>

<script src="script/jquery-3.5.1.slim.min.js"></script>
<script src="script/popper.min.js"></script>
<script src="script/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
<script src="dashboard.js"></script>
<script src="script/rosquinha.js"></script>
<script src="script/setores.js"></script>
<script src="script/grafico_grande.js"></script>

<script>
  function mudar_dash_p_solo() {
    // let btn_dash_atm = document.getElementById("btn_dash_atm");
    btn_dash_atm.style.display = 'none';
    // let btn_dash_solo = document.getElementById("btn_dash_solo");
    btn_dash_solo.style.display = 'block';

    // let dash_solo = document.getElementById("dash_solo");
    dash_solo.style.display = 'block';
    // let dash_atm = document.getElementById("dash_atm");
    dash_atm.style.display = 'none';
  }

  function mudar_dash_p_atm() {
    // let btn_dash_solo = document.getElementById("btn_dash_solo");
    btn_dash_solo.style.display = 'none';
    // let btn_dash_atm = document.getElementById("btn_dash_atm");
    btn_dash_atm.style.display = 'block';

    // let dash_solo = document.getElementById("dash_solo");
    dash_solo.style.display = 'none';
    // let dash_atm = document.getElementById("dash_atm");
    dash_atm.style.display = 'block';
  }
</script>

<script>
  var ctx = document.getElementById('myChart').getContext('2d');
  var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'line',

    // The data for our dataset
    data: {
      labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
      datasets: [{
        label: 'Temperatura',
        backgroundColor: 'red',
        borderColor: 'red',
        data: [0, 10, 5, 2, 20, 30, 45],
        fill: false
      },
      {
        label: 'Umidade',
        backgroundColor: 'blue',
        borderColor: 'blue',
        data: [10, 0, 15, 3, 5, 20, 45],
        fill: false
      }],
    },
    //Valmor invasor >:)
    // Configuration options go here
    options: {}
  });
</script>


<script>
  function AtualizarIndices(maiorTemp,menorTemp,maiorUmid,menorUmid){
    maiorTempertura.innerHTML = maiorTemp[0]
    maiorTemperturaArea.innerHTML = maiorTemp[1]
    menorTempertura.innerHTML = menorTemp[0]
    menorTemperturaArea.innerHTML = menorTemp[1]
  
    maiorUmidade.innerHTML = maiorUmid[0]
    maiorUmidadeArea.innerHTML = maiorUmid[1]
    menorUmidade.innerHTML = menorUmid[0]
    menorUmidadeArea.innerHTML = menorUmid[1]

  }
  function AtualizarIndicesSolo(maiorTemp,menorTemp,maiorUmid,menorUmid){
    maiorTemperturaSolo.innerHTML = maiorTemp[0]
    maiorTemperturaAreaSolo.innerHTML = maiorTemp[1]
    menorTemperturaSolo.innerHTML = menorTemp[0]
    menorTemperturaAreaSolo.innerHTML = menorTemp[1]
  
    maiorUmidadeSolo.innerHTML = maiorUmid[0]
    maiorUmidadeAreaSolo.innerHTML = maiorUmid[1]
    menorUmidadeSolo.innerHTML = menorUmid[0]
    menorUmidadeAreaSolo.innerHTML = menorUmid[1]

  }
  // function atualizarGraficoGrande();
  // //-----------------------------------------MYCHARTSOLO ---------------------------------------
  // var ctx = document.getElementById('myChartSolo').getContext('2d');
  // var chart = new Chart(ctx, {
  //   // The type of chart we want to create
  //   type: 'line',
  //   datasets: [{ 
  //   data: {
  //   // The data for 
  //     labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
  //     datasets: [{
  //       label: 'Temperatura',
  //       backgroundColor: 'green',
  //       borderColor: 'green',
  //       data: [0, 25, 5, 2, 70, 30, 45],
  //       fill: false
  //     },
  //     {
  //       label: 'Umidade',
  //       backgroundColor: 'yellow',
  //       borderColor: 'yellow',
  //       data: [10, 10, 15, 30, 5, 20, 45],
  //       fill: false
  //     }],
  //   },
  //   //Valmor invasor >:)
  //   // Configuration options go here
  //   options: {}
  // });
</script>

<script>

  setInterval(function () {
    var maior = parseInt(Math.random() * (19 + 1) + 55);
    var menor = parseInt(Math.random() * (9 + 1) + 35);
    var setormenor = parseInt(Math.random() * 10 + 1);
    var setormaior = parseInt(Math.random() * 10 + 1);
    var maquinamenor = parseInt(Math.random() * 10 + 1);
    var maquinamaior = parseInt(Math.random() * 10 + 1);
    maioregistro.innerHTML = maior;
    menoregistro.innerHTML = menor;
    setmenor.innerHTML = setormenor;
    setmaior.innerHTML = setormaior;
    maqmenor.innerHTML = maquinamenor;
    maqmaior.innerHTML = maquinamaior;
  }
    , 3200);

  var grafico1=[] ;
  var teste=0;
  atualizarGrafico();

  function plotarGrafico(contexto, dado, dado2) {

    if (teste >= 1){
      grafico1.destroy();
      teste=0;
    }
      grafico1 = new Chart(contexto, {
        // The type of chart we want to create
        type: 'horizontalBar',

        // The data for our dataset

        data: {

          labels: [`Área 1`,`Área 2`,`Área 3`,`Área 4`,`Área 5`],

          datasets: [{
            label: 'Temperatura °C',
            backgroundColor: 'yellow',
            borderWidth: 1,
            data: 
              dado
            
          }, {
            label: 'Umidade %',
            backgroundColor: 'blue',
            data: 
            dado2
            
          }
        ],
        
        },
        options: {

          scales: {

            xAxes: [{
              display: true,
              ticks: {
                beginAtZero: true,
                steps: 10,
                stepValue: 5,
                max: 100
              }
            }]
          },
        }
      });
      teste++;
  }
/*SOLO*/
  var grafico2 = [];
  var teste2=0;
  atualizarGraficosolo();

  function plotarGrafico2(contexto, dado, dado2) {

    if (teste2 >= 1){
      grafico2.destroy();
      teste2=0;
    }
    
      grafico2 = new Chart(contexto, {
        // The type of chart we want to create
        type: 'horizontalBar',

        // The data for our dataset

        data: {

          labels: [`Área 1`,`Área 2`,`Área 3`,`Área 4`,`Área 5`],

          datasets: [{
            label: 'Temperatura °C',
            backgroundColor: 'red',
            borderWidth: 1,
            data: 
              dado
            
          }, {
            label: 'Umidade %',
            backgroundColor: 'blue',
            data: 
              dado2
            
          }],
        },
        options: {

          scales: {

            xAxes: [{
              display: true,
              ticks: {
                beginAtZero: true,
                steps: 10,
                stepValue: 5,
                max: 100
              }
            }]
          },
        }
      });
      teste2++;
  }
  var grafico3 = [];
  var teste3=0;
  atualizarRosca();

  function plotarGraficoRosca(contexto, critico,emergencial,alerta,ideal) {

    if (teste3 >= 1){
      grafico3.destroy();
      teste3=0;
    }
    
      grafico3 = new Chart(contexto, {
        // The type of chart we want to create
        type: 'doughnut',
            data: {
                datasets: [{
                    data: [
                        critico,
                        ideal,
                        alerta,
                        emergencial,
                    ],
                    backgroundColor: [
                        window.chartColors.red,
                        window.chartColors.green,
                        window.chartColors.yellow,
                        window.chartColors.orange,
                    ],
                    label: 'Dataset 1'
                }],
                labels: [
                    'Critico',
                    'ideal',
                    'alerta',
                    'emergencial',
                ]
            },
            options: {
                responsive: true,
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Chart.js Doughnut Chart'
                },
                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            }
      });
      teste3++;
  }


  var grafico4 = [];
  var teste4=0;
  atualizarRosca1();
  function plotarGraficoRosca1(contexto, critico,emergencial,alerta,ideal) {
    if (teste4 >= 1){
      grafico4.destroy();
      teste4=0;
    }
    
    grafico4 = new Chart(contexto, {
      // The type of chart we want to create
      type: 'doughnut',
          data: {
              datasets: [{
                  data: [
                      critico,
                      ideal,
                      alerta,
                      emergencial,
                  ],
                  backgroundColor: [
                      window.chartColors.red,
                      window.chartColors.green,
                      window.chartColors.yellow,
                      window.chartColors.orange,
                  ],
                  label: 'Dataset 1'
              }],
              labels: [
                  'Critico',
                  'ideal',
                  'alerta',
                  'emergencial',
              ]
          },
          options: {
              responsive: true,
              legend: {
                  position: 'top',
              },
              title: {
                  display: true,
                  text: 'Chart.js Doughnut Chart'
              },
              animation: {
                  animateScale: true,
                  animateRotate: true
              }
          }
    });
    teste4++;
  }

</script>

</html>